#:kivy 2.0
#:import MDTopAppBar kivymd.uix.toolbar.MDTopAppBar

<BookItem>:
    orientation: 'vertical'
    size_hint_y: None
    height: dp(180)
    padding: dp(5)

    on_release: app.save_book_and_clear(root.book_id, root.title, root.authors, root.cover_url, root.page_count)
    ripple_behavior: True
    
    canvas.before:
        Color:
            rgba: 0.9, 0.9, 0.9, 1
        RoundedRectangle:
            size: self.size
            pos:self.pos
            radius: [10,]

    BoxLayout:
        orientation: 'vertical'
        padding: dp(5)
        spacing: dp(5)            

        AsyncImage:
            source: root.cover_url # Esta será a capa do livro
            size_hint_y: 1
            size_hint_x: 0.8
            allow_stretch: True
            keep_ratio: False

        MDLabel:
            text: root.title # Este será o titulo
            halign: 'center'
            size_hint_y: 0.2
            shorten: True
            shorten_from: 'right'
            font_style: 'Body2'
            color: 0, 0, 0, 1

ScreenManager:
    MainScreen:

<MainScreen>:
    name: 'main_screen'
    BoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: "Roots"
            elevetion: 4
            left_action_items: [["arrow-left", lambda x: app.clear_books_grid()]]

        MDBoxLayout:
            adaptive_height: True
            padding: dp(16)

            MDTextField:
                id: input_field
                hint_text: "Adicione um livro..."
                mode: "round"
                on_text_validate: app.add_book_search(self.text)
                on_focus: self.hint_text = "Adicione um livro..." if self.focus else ""
                icon_right: "magnify"
                icon_right_on_focus: "magnify"

        ScrollView:
            GridLayout:
                id: books_grid
                cols: 4
                size_hint_y: None
                height: self.minimum_height
                padding: dp(16)
                spacing: dp(10)

